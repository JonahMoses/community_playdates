  [1m[36m (291.6ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (340.2ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (2.1ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (5.6ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.8ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (1.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.2ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 03:48:02', '2014-02-12 03:48:02', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 03:48:02', '2014-02-12 03:48:02', 298486374)
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 03:48:02 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 03:48:02 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 03:48:02 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 03:48:02 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 03:48:02 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 03:48:02 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 03:48:06', '2014-02-12 03:48:06', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 03:48:06', '2014-02-12 03:48:06', 298486374)
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 03:48:06 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 03:48:06 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 03:48:06", updated_at: "2014-02-12 03:48:06">}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 03:48:06 UTC +00:00], ["updated_at", Wed, 12 Feb 2014 03:48:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 03:48:07', '2014-02-12 03:48:07', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 03:48:07', '2014-02-12 03:48:07', 298486374)
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 03:48:08 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 03:48:08 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3" for 127.0.0.1 at 2014-02-11 20:48:08 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"id"=>"1", "event_id"=>"3"}
  [1m[36mRegistration Load (0.6ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 3[0m
Completed 200 OK in 19ms (Views: 1.5ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 03:48:08 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 03:48:08 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1" for 127.0.0.1 at 2014-02-11 20:48:08 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRegistration Load (0.5ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1[0m
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 03:48:08 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 03:48:08 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1" for 127.0.0.1 at 2014-02-11 20:48:08 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRegistration Load (0.9ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."id" = $1 LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "registrations" WHERE "registrations"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 204 No Content in 5ms (Views: 0.5ms | ActiveRecord: 1.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-11 20:48:08 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3"}
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 03:48:08 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 03:48:08 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
