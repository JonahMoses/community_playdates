  [1m[36m (291.6ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (340.2ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (2.1ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (5.6ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.8ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (1.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.2ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 03:48:02', '2014-02-12 03:48:02', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 03:48:02', '2014-02-12 03:48:02', 298486374)
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 03:48:02 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 03:48:02 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 03:48:02 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 03:48:02 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 03:48:02 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 03:48:02 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 03:48:06', '2014-02-12 03:48:06', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 03:48:06', '2014-02-12 03:48:06', 298486374)
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 03:48:06 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 03:48:06 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 03:48:06", updated_at: "2014-02-12 03:48:06">}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 03:48:06 UTC +00:00], ["updated_at", Wed, 12 Feb 2014 03:48:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 03:48:07', '2014-02-12 03:48:07', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 03:48:07', '2014-02-12 03:48:07', 298486374)
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 03:48:08 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 03:48:08 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3" for 127.0.0.1 at 2014-02-11 20:48:08 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"id"=>"1", "event_id"=>"3"}
  [1m[36mRegistration Load (0.6ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 3[0m
Completed 200 OK in 19ms (Views: 1.5ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 03:48:08 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 03:48:08 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1" for 127.0.0.1 at 2014-02-11 20:48:08 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRegistration Load (0.5ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1[0m
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 03:48:08 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 03:48:08 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1" for 127.0.0.1 at 2014-02-11 20:48:08 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRegistration Load (0.9ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."id" = $1 LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "registrations" WHERE "registrations"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 204 No Content in 5ms (Views: 0.5ms | ActiveRecord: 1.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-11 20:48:08 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3"}
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 03:48:08 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 03:48:08 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (377.2ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (3047.5ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.7ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (6.2ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.5ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.4ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:51:59', '2014-02-12 15:51:59', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:51:59', '2014-02-12 15:51:59', 298486374)
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 15:51:59 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 15:51:59 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 15:51:59 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 15:51:59 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 15:51:59 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 15:51:59 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:52:03', '2014-02-12 15:52:03', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:52:03', '2014-02-12 15:52:03', 298486374)
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 15:52:03 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 15:52:03 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 15:52:03", updated_at: "2014-02-12 15:52:03">}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:52:05', '2014-02-12 15:52:05', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:52:05', '2014-02-12 15:52:05', 298486374)
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 15:52:05 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 15:52:05 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3" for 127.0.0.1 at 2014-02-12 08:52:05 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"id"=>"1", "event_id"=>"3"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 14ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 15:52:05 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 15:52:05 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/registrations/users/1" for 127.0.0.1 at 2014-02-12 08:52:05 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 15:52:05 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 15:52:05 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1" for 127.0.0.1 at 2014-02-12 08:52:05 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 08:52:05 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36m (114.3ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (437.6ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.0ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (5.9ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.5ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:53:30', '2014-02-12 15:53:30', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:53:30', '2014-02-12 15:53:30', 298486374)
  [1m[36m (28.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 15:53:31 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 15:53:31 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 15:53:31 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 15:53:31 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 15:53:31 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 15:53:31 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:53:34', '2014-02-12 15:53:34', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:53:34', '2014-02-12 15:53:34', 298486374)
  [1m[36m (21.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 15:53:34 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 15:53:34 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 15:53:34", updated_at: "2014-02-12 15:53:34">}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:53:36', '2014-02-12 15:53:36', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:53:36', '2014-02-12 15:53:36', 298486374)
  [1m[36m (40.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 15:53:36 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 15:53:36 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3" for 127.0.0.1 at 2014-02-12 08:53:36 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"id"=>"1", "event_id"=>"3"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 13ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 15:53:36 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 15:53:36 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/registrations/users/1" for 127.0.0.1 at 2014-02-12 08:53:36 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 15:53:36 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 15:53:36 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1" for 127.0.0.1 at 2014-02-12 08:53:36 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 08:53:36 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36m (173.0ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (453.3ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.5ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (6.3ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.3ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.0ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:55:45', '2014-02-12 15:55:45', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:55:45', '2014-02-12 15:55:45', 298486374)
  [1m[36m (17.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 15:55:45 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 15:55:45 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 15:55:45 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 15:55:45 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.9ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 15:55:45 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 15:55:45 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.4ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:55:49', '2014-02-12 15:55:49', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:55:49', '2014-02-12 15:55:49', 298486374)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 15:55:49 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 15:55:49 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 15:55:49", updated_at: "2014-02-12 15:55:49">}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:55:51', '2014-02-12 15:55:51', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:55:51', '2014-02-12 15:55:51', 298486374)
  [1m[36m (29.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 15:55:51 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 15:55:51 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1" for 127.0.0.1 at 2014-02-12 08:55:51 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 14ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 15:55:51 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 15:55:51 UTC +00:00], ["user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/registrations/1" for 127.0.0.1 at 2014-02-12 08:55:51 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 08:55:51 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (114.1ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (303.9ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (5.8ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.2ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.0ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:57:11', '2014-02-12 15:57:11', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:57:11', '2014-02-12 15:57:11', 298486374)
  [1m[36m (276.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 15:57:11 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 15:57:11 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 15:57:11 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 15:57:11 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 15:57:11 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 15:57:11 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:57:15', '2014-02-12 15:57:15', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:57:15', '2014-02-12 15:57:15', 298486374)
  [1m[36m (120.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 15:57:15 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 15:57:15 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 15:57:15", updated_at: "2014-02-12 15:57:15">}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:57:17', '2014-02-12 15:57:17', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 15:57:17', '2014-02-12 15:57:17', 298486374)
  [1m[36m (2.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 15:57:17 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 15:57:17 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1" for 127.0.0.1 at 2014-02-12 08:57:17 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 13ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 15:57:17 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 15:57:17 UTC +00:00], ["user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/registrations/1" for 127.0.0.1 at 2014-02-12 08:57:17 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 08:57:17 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (113.6ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (348.6ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.0ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (5.8ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.2ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:00:08', '2014-02-12 16:00:08', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:00:08', '2014-02-12 16:00:08', 298486374)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:00:08 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:00:08 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:00:08 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:00:08 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:00:08 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:00:08 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.4ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:00:12', '2014-02-12 16:00:12', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:00:12', '2014-02-12 16:00:12', 298486374)
  [1m[36m (79.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:00:12 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:00:12 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:00:12", updated_at: "2014-02-12 16:00:12">}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:00:14', '2014-02-12 16:00:14', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:00:14', '2014-02-12 16:00:14', 298486374)
  [1m[36m (15.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:00:14 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:00:14 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1" for 127.0.0.1 at 2014-02-12 09:00:14 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 13ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:00:14 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:00:14 UTC +00:00], ["user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/registrations/1" for 127.0.0.1 at 2014-02-12 09:00:14 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:00:14 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (115.1ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (322.1ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.0ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (5.7ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.5ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.0ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.4ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:00:32', '2014-02-12 16:00:32', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:00:32', '2014-02-12 16:00:32', 298486374)
  [1m[36m (12.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:00:33 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:00:33 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:00:33 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:00:33 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:00:33 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:00:33 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:00:36', '2014-02-12 16:00:36', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:00:36', '2014-02-12 16:00:36', 298486374)
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:00:36 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:00:36 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:00:36", updated_at: "2014-02-12 16:00:36">}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:00:38', '2014-02-12 16:00:38', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:00:38', '2014-02-12 16:00:38', 298486374)
  [1m[36m (15.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:00:38 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:00:38 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1" for 127.0.0.1 at 2014-02-12 09:00:38 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 13ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:00:38 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:00:38 UTC +00:00], ["user_id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/registrations/1" for 127.0.0.1 at 2014-02-12 09:00:38 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:00:38 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (115.9ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (321.1ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.0ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (5.9ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.2ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (1.6ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.3ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:00:51', '2014-02-12 16:00:51', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:00:51', '2014-02-12 16:00:51', 298486374)
  [1m[36m (140.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:00:52 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:00:52 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:00:52 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:00:52 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:00:52 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:00:52 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:00:56', '2014-02-12 16:00:56', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:00:56', '2014-02-12 16:00:56', 298486374)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:00:56 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:00:56 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:00:56", updated_at: "2014-02-12 16:00:56">}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:00:58', '2014-02-12 16:00:58', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:00:58', '2014-02-12 16:00:58', 298486374)
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:00:58 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:00:58 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3" for 127.0.0.1 at 2014-02-12 09:00:58 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"id"=>"1", "event_id"=>"3"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 13ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:00:58 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:00:58 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/registrations/users/1" for 127.0.0.1 at 2014-02-12 09:00:58 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:00:58 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:00:58 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1" for 127.0.0.1 at 2014-02-12 09:00:58 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:00:58 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36m (115.2ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (321.2ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.0ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (6.1ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.2ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:01:43', '2014-02-12 16:01:43', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:01:43', '2014-02-12 16:01:43', 298486374)
  [1m[36m (131.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:01:43 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:01:43 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:01:43 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:01:43 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:01:43 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:01:43 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:01:47', '2014-02-12 16:01:47', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:01:47', '2014-02-12 16:01:47', 298486374)
  [1m[36m (77.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:01:47 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:01:47 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:01:47", updated_at: "2014-02-12 16:01:47">}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:01:49', '2014-02-12 16:01:49', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:01:49', '2014-02-12 16:01:49', 298486374)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:01:49 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:01:49 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3" for 127.0.0.1 at 2014-02-12 09:01:49 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"id"=>"1", "event_id"=>"3"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 15ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:01:49 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:01:49 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/registrations/users/1" for 127.0.0.1 at 2014-02-12 09:01:49 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:01:49 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:01:49 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1" for 127.0.0.1 at 2014-02-12 09:01:49 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:01:49 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36m (114.2ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (428.8ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.0ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (5.9ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.3ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (1.7ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.3ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:03:04', '2014-02-12 16:03:04', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:03:04', '2014-02-12 16:03:04', 298486374)
  [1m[36m (58.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:03:04 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:03:04 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:03:04 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:03:04 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:03:04 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:03:04 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:03:08', '2014-02-12 16:03:08', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:03:08', '2014-02-12 16:03:08', 298486374)
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:03:08 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:03:08 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:03:08", updated_at: "2014-02-12 16:03:08">}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:03:10', '2014-02-12 16:03:10', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:03:10', '2014-02-12 16:03:10', 298486374)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:03:10 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:03:10 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3" for 127.0.0.1 at 2014-02-12 09:03:10 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"id"=>"1", "event_id"=>"3"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 14ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:03:10 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:03:10 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/registrations/users/1" for 127.0.0.1 at 2014-02-12 09:03:10 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:03:10 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:03:10 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1" for 127.0.0.1 at 2014-02-12 09:03:10 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:03:10 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36m (994.5ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (413.6ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.9ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (8.6ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (2.2ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:19:02', '2014-02-12 16:19:02', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:19:02', '2014-02-12 16:19:02', 298486374)
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:19:02 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:19:02 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:19:02 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:19:02 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:19:02 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:19:02 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.5ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:19:06', '2014-02-12 16:19:06', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:19:06', '2014-02-12 16:19:06', 298486374)
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:19:06 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:19:06 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:19:06", updated_at: "2014-02-12 16:19:06">}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:19:06 UTC +00:00], ["updated_at", Wed, 12 Feb 2014 16:19:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.5ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:19:08', '2014-02-12 16:19:08', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:19:08', '2014-02-12 16:19:08', 298486374)
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:19:08 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:19:08 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3" for 127.0.0.1 at 2014-02-12 09:19:08 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"id"=>"1", "event_id"=>"3"}
  [1m[36mRegistration Load (0.5ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 3[0m
Completed 200 OK in 17ms (Views: 1.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:19:08 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:19:08 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1" for 127.0.0.1 at 2014-02-12 09:19:08 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRegistration Load (0.3ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1[0m
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:19:08 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:19:08 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1" for 127.0.0.1 at 2014-02-12 09:19:08 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRegistration Load (0.6ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."id" = $1 LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "registrations" WHERE "registrations"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 204 No Content in 4ms (Views: 0.4ms | ActiveRecord: 1.1ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:19:08 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:19:08 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:19:08 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 2ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (113.6ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (470.3ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.1ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (6.1ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.2ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:22:42', '2014-02-12 16:22:42', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:22:42', '2014-02-12 16:22:42', 298486374)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:22:42 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:22:42 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:22:42 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:22:42 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:22:42 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:22:42 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.4ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:22:46', '2014-02-12 16:22:46', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:22:46', '2014-02-12 16:22:46', 298486374)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:22:46 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:22:46 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:22:46", updated_at: "2014-02-12 16:22:46">}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:22:46 UTC +00:00], ["updated_at", Wed, 12 Feb 2014 16:22:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:22:47', '2014-02-12 16:22:47', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:22:47', '2014-02-12 16:22:47', 298486374)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:22:47 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:22:47 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3" for 127.0.0.1 at 2014-02-12 09:22:47 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"id"=>"1", "event_id"=>"3"}
  [1m[36mRegistration Load (0.5ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 3[0m
Completed 200 OK in 43ms (Views: 1.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:22:47 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:22:47 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1" for 127.0.0.1 at 2014-02-12 09:22:47 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRegistration Load (0.4ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1[0m
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:22:48 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:22:48 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1" for 127.0.0.1 at 2014-02-12 09:22:48 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRegistration Load (0.5ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."id" = $1 LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "registrations" WHERE "registrations"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 204 No Content in 4ms (Views: 0.5ms | ActiveRecord: 1.1ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:22:48 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:22:48 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:22:48 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 2ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (113.5ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (304.9ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.0ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (5.6ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (3.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:23:24', '2014-02-12 16:23:24', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:23:24', '2014-02-12 16:23:24', 298486374)
  [1m[36m (1.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:23:24 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:23:24 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:23:24 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:23:24 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (1.1ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:23:24 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:23:24 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.4ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:23:28', '2014-02-12 16:23:28', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:23:28', '2014-02-12 16:23:28', 298486374)
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:23:28 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:23:28 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:23:28", updated_at: "2014-02-12 16:23:28">}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:23:28 UTC +00:00], ["updated_at", Wed, 12 Feb 2014 16:23:28 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.3ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:23:30', '2014-02-12 16:23:30', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:23:30', '2014-02-12 16:23:30', 298486374)
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:23:30 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:23:30 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3" for 127.0.0.1 at 2014-02-12 09:23:30 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"id"=>"1", "event_id"=>"3"}
  [1m[36mRegistration Load (0.5ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 3[0m
Completed 200 OK in 43ms (Views: 1.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:23:30 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:23:30 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1" for 127.0.0.1 at 2014-02-12 09:23:30 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRegistration Load (0.4ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1[0m
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:23:30 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:23:30 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1" for 127.0.0.1 at 2014-02-12 09:23:30 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRegistration Load (0.6ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."id" = $1 LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "registrations" WHERE "registrations"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 204 No Content in 4ms (Views: 0.4ms | ActiveRecord: 1.1ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:23:30 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:23:30 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:23:30 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 2ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (113.9ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (339.3ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.1ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (34.2ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (53.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (63.7ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (73.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:27:11', '2014-02-12 16:27:11', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:27:11', '2014-02-12 16:27:11', 298486374)
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:27:11 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:27:11 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:27:11 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:27:11 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:27:11 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:27:11 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.4ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:27:15', '2014-02-12 16:27:15', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:27:15', '2014-02-12 16:27:15', 298486374)
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:27:17', '2014-02-12 16:27:17', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:27:17', '2014-02-12 16:27:17', 298486374)
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:27:17 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:27:17 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3" for 127.0.0.1 at 2014-02-12 09:27:17 -0700
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:27:17 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:27:17 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/registrations/users/1" for 127.0.0.1 at 2014-02-12 09:27:17 -0700
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:27:17 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:27:17 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1" for 127.0.0.1 at 2014-02-12 09:27:17 -0700
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:27:17 -0700
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36m (215.4ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (313.9ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.0ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (5.9ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.3ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (1.9ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (66.8ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:27:43', '2014-02-12 16:27:43', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:27:43', '2014-02-12 16:27:43', 298486374)
  [1m[36m (140.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:27:44 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:27:44 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:27:44 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:27:44 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:27:44 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:27:44 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:27:47', '2014-02-12 16:27:47', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:27:47', '2014-02-12 16:27:47', 298486374)
  [1m[36m (20.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:27:47 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:27:47 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:27:47", updated_at: "2014-02-12 16:27:47">}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 115ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:27:49', '2014-02-12 16:27:49', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:27:49', '2014-02-12 16:27:49', 298486374)
  [1m[36m (44.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:27:50 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:27:50 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3" for 127.0.0.1 at 2014-02-12 09:27:50 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"id"=>"1", "event_id"=>"3"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 127ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:27:50 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:27:50 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/registrations/users/1" for 127.0.0.1 at 2014-02-12 09:27:50 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 117ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:27:50 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:27:50 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1" for 127.0.0.1 at 2014-02-12 09:27:50 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 118ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:27:50 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 117ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36m (113.4ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (360.8ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.4ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (6.4ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.2ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.0ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.4ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:29:59', '2014-02-12 16:29:59', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:29:59', '2014-02-12 16:29:59', 298486374)
  [1m[36m (59.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:29:59 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:29:59 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:29:59 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:29:59 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:29:59 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:29:59 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:30:03', '2014-02-12 16:30:03', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:30:03', '2014-02-12 16:30:03', 298486374)
  [1m[36m (43.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:30:03 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:30:03 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:30:03", updated_at: "2014-02-12 16:30:03">}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 118ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:30:05', '2014-02-12 16:30:05', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:30:05', '2014-02-12 16:30:05', 298486374)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:30:05 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:30:05 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3" for 127.0.0.1 at 2014-02-12 09:30:05 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"id"=>"1", "event_id"=>"3"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 144ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:30:05 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:30:05 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/registrations/users/1" for 127.0.0.1 at 2014-02-12 09:30:05 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 116ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:30:06 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:30:06 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1" for 127.0.0.1 at 2014-02-12 09:30:06 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 121ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:30:06 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 117ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36m (113.4ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (321.1ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (6.3ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (2.0ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.0ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:30:24', '2014-02-12 16:30:24', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:30:24', '2014-02-12 16:30:24', 298486374)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:30:24 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:30:24 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:30:24 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:30:24 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:30:24 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:30:24 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:30:27', '2014-02-12 16:30:27', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:30:27', '2014-02-12 16:30:27', 298486374)
  [1m[36m (14.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:30:27 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:30:27 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:30:27", updated_at: "2014-02-12 16:30:27">}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 116ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:30:30', '2014-02-12 16:30:30', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:30:30', '2014-02-12 16:30:30', 298486374)
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:30:30 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:30:30 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3" for 127.0.0.1 at 2014-02-12 09:30:30 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"id"=>"1", "event_id"=>"3"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 130ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:30:30 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:30:30 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/registrations/users/1" for 127.0.0.1 at 2014-02-12 09:30:30 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 118ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:30:30 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:30:30 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1" for 127.0.0.1 at 2014-02-12 09:30:30 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 115ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:30:30 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 120ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36m (114.1ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (368.2ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.1ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (89.6ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (32.2ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (6.0ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.6ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:32:24', '2014-02-12 16:32:24', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:32:24', '2014-02-12 16:32:24', 298486374)
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:32:24 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:32:24 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:32:24 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:32:24 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (1.1ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:32:24 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:32:24 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.5ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:32:28', '2014-02-12 16:32:28', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:32:28', '2014-02-12 16:32:28', 298486374)
  [1m[36m (51.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:32:28 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:32:28 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:32:28", updated_at: "2014-02-12 16:32:28">}
Completed 500 Internal Server Error in 0ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:32:30', '2014-02-12 16:32:30', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:32:30', '2014-02-12 16:32:30', 298486374)
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:32:30 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:32:30 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3" for 127.0.0.1 at 2014-02-12 09:32:30 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"id"=>"1", "event_id"=>"3"}
Completed 500 Internal Server Error in 26ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:32:30 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:32:30 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/registrations/users/1" for 127.0.0.1 at 2014-02-12 09:32:30 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"id"=>"1"}
Completed 500 Internal Server Error in 1ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:32:30 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:32:30 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1" for 127.0.0.1 at 2014-02-12 09:32:30 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"id"=>"1"}
Completed 500 Internal Server Error in 1ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:32:30 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3"}
Completed 500 Internal Server Error in 1ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36m (113.1ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (353.5ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.0ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (6.1ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.2ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.4ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:33:13', '2014-02-12 16:33:13', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:33:13', '2014-02-12 16:33:13', 298486374)
  [1m[36m (173.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:33:13 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:33:13 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:33:13 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:33:13 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.9ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:33:13 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:33:13 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:33:17', '2014-02-12 16:33:17', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:33:17', '2014-02-12 16:33:17', 298486374)
  [1m[36m (1.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:33:17 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:33:17 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:33:17", updated_at: "2014-02-12 16:33:17">}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:33:17 UTC +00:00], ["updated_at", Wed, 12 Feb 2014 16:33:17 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:33:19', '2014-02-12 16:33:19', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:33:19', '2014-02-12 16:33:19', 298486374)
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:33:19 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:33:19 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3" for 127.0.0.1 at 2014-02-12 09:33:19 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"id"=>"1", "event_id"=>"3"}
  [1m[36mRegistration Load (0.5ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 3[0m
Completed 200 OK in 43ms (Views: 1.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:33:19 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:33:19 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1" for 127.0.0.1 at 2014-02-12 09:33:19 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRegistration Load (0.5ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1[0m
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:33:19 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:33:19 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1" for 127.0.0.1 at 2014-02-12 09:33:19 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRegistration Load (0.6ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."id" = $1 LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "registrations" WHERE "registrations"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 204 No Content in 5ms (Views: 0.8ms | ActiveRecord: 1.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:33:19 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3"}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:33:19 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:33:19 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 5ms (Views: 0.6ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (115.4ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (350.7ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (7.8ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.2ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.4ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:35:18', '2014-02-12 16:35:18', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:35:18', '2014-02-12 16:35:18', 298486374)
  [1m[36m (108.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:35:18 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:35:18 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:35:18 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:35:18 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.9ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:35:18 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:35:18 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (116.3ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (286.9ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.1ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (5.8ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.2ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:35:27', '2014-02-12 16:35:27', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:35:27', '2014-02-12 16:35:27', 298486374)
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:35:27 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:35:27 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:35:27 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:35:27 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (1.4ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:35:27 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:35:27 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.5ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:35:31', '2014-02-12 16:35:31', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:35:31', '2014-02-12 16:35:31', 298486374)
  [1m[36m (7.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:35:31 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:35:31 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:35:31", updated_at: "2014-02-12 16:35:31">}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:35:31 UTC +00:00], ["updated_at", Wed, 12 Feb 2014 16:35:31 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.3ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:35:33', '2014-02-12 16:35:33', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:35:33', '2014-02-12 16:35:33', 298486374)
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:35:33 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:35:33 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:35:33 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1", "event_id"=>"3"}
  [1m[36mRegistration Load (0.5ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 3[0m
Completed 200 OK in 47ms (Views: 1.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:35:33 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:35:33 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:35:33 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1"}
  [1m[36mRegistration Load (0.4ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1[0m
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:35:33 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3", "auth_id"=>"hello"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:35:33 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:35:33 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 201 Created in 3ms (Views: 0.4ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36m (114.8ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (330.0ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (5.9ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (1.9ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:36:11', '2014-02-12 16:36:11', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:36:11', '2014-02-12 16:36:11', 298486374)
  [1m[36m (21.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:36:11 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:36:11 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:36:11 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:36:11 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:36:12 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:36:12 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:36:15', '2014-02-12 16:36:15', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:36:15', '2014-02-12 16:36:15', 298486374)
  [1m[36m (27.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:36:15 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:36:15 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:36:15", updated_at: "2014-02-12 16:36:15">}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:36:15 UTC +00:00], ["updated_at", Wed, 12 Feb 2014 16:36:15 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 2ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:36:17', '2014-02-12 16:36:17', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:36:17', '2014-02-12 16:36:17', 298486374)
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:36:17 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:36:17 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:36:17 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1", "event_id"=>"3"}
  [1m[36mRegistration Load (0.5ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 3[0m
Completed 200 OK in 44ms (Views: 1.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:36:17 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:36:17 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:36:17 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1"}
  [1m[36mRegistration Load (0.3ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1[0m
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:36:17 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:36:17 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:36:17 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1"}
  [1m[36mRegistration Load (0.5ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."id" = $1 LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "registrations" WHERE "registrations"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 204 No Content in 4ms (Views: 0.4ms | ActiveRecord: 1.1ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:36:17 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3", "auth_id"=>"hello"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:36:17 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:36:17 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 2ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (113.9ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (356.9ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.0ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (5.8ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.3ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:36:31', '2014-02-12 16:36:31', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:36:31', '2014-02-12 16:36:31', 298486374)
  [1m[36m (130.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:36:32 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:36:32 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:36:32 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:36:32 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:36:32 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:36:32 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:36:35', '2014-02-12 16:36:35', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:36:35', '2014-02-12 16:36:35', 298486374)
  [1m[36m (25.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:36:35 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:36:35 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:36:35", updated_at: "2014-02-12 16:36:35">}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:36:35 UTC +00:00], ["updated_at", Wed, 12 Feb 2014 16:36:35 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:36:37', '2014-02-12 16:36:37', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:36:37', '2014-02-12 16:36:37', 298486374)
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:36:37 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:36:37 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:36:37 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1", "event_id"=>"3"}
  [1m[36mRegistration Load (0.5ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 3[0m
Completed 200 OK in 46ms (Views: 1.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:36:37 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:36:37 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:36:37 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1"}
  [1m[36mRegistration Load (0.4ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1[0m
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:36:37 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:36:37 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1?auth_id=hell" for 127.0.0.1 at 2014-02-12 09:36:37 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"auth_id"=>"hell", "id"=>"1"}
  [1m[36mRegistration Load (0.6ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."id" = $1 LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "registrations" WHERE "registrations"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 204 No Content in 4ms (Views: 0.4ms | ActiveRecord: 1.3ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:36:37 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3", "auth_id"=>"hello"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:36:37 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:36:37 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 2ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (114.2ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (334.9ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.2ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (9.8ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (2.0ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (1.8ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.3ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:37:15', '2014-02-12 16:37:15', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:37:15', '2014-02-12 16:37:15', 298486374)
  [1m[36m (59.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:37:15 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:37:15 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:37:15 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:37:15 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:37:15 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:37:15 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:37:19', '2014-02-12 16:37:19', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:37:19', '2014-02-12 16:37:19', 298486374)
  [1m[36m (28.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:37:19 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:37:19 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:37:19", updated_at: "2014-02-12 16:37:19">}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:37:19 UTC +00:00], ["updated_at", Wed, 12 Feb 2014 16:37:19 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.4ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:37:21', '2014-02-12 16:37:21', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:37:21', '2014-02-12 16:37:21', 298486374)
  [1m[36m (40.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:37:21 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:37:21 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:37:21 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1", "event_id"=>"3"}
  [1m[36mRegistration Load (0.5ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 3[0m
Completed 200 OK in 43ms (Views: 1.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:37:21 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:37:21 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:37:21 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1"}
  [1m[36mRegistration Load (0.4ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1[0m
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:37:21 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:37:21 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1?auth_id=helo" for 127.0.0.1 at 2014-02-12 09:37:21 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"auth_id"=>"helo", "id"=>"1"}
  [1m[36mRegistration Load (0.6ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."id" = $1 LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "registrations" WHERE "registrations"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 204 No Content in 4ms (Views: 0.5ms | ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:37:21 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3", "auth_id"=>"hello"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:37:21 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:37:21 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (116.6ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (339.2ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.0ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (6.1ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.3ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.0ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:37:57', '2014-02-12 16:37:57', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:37:57', '2014-02-12 16:37:57', 298486374)
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:37:57 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:37:57 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:37:57 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:37:57 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:37:57 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:37:57 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:38:00', '2014-02-12 16:38:00', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:38:00', '2014-02-12 16:38:00', 298486374)
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:38:00 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:38:00 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:38:00", updated_at: "2014-02-12 16:38:00">}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:38:00 UTC +00:00], ["updated_at", Wed, 12 Feb 2014 16:38:00 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.4ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:38:02', '2014-02-12 16:38:02', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:38:02', '2014-02-12 16:38:02', 298486374)
  [1m[36m (4.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:38:02 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:38:02 UTC +00:00], ["user_id", 2]]
  [1m[35m (1.8ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:38:02 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1", "event_id"=>"3"}
  [1m[36mRegistration Load (0.5ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 3[0m
Completed 200 OK in 42ms (Views: 1.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:38:02 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:38:02 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:38:02 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1"}
  [1m[36mRegistration Load (0.3ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1[0m
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:38:02 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:38:02 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1?auth_id=helo" for 127.0.0.1 at 2014-02-12 09:38:02 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"auth_id"=>"helo", "id"=>"1"}
  [1m[36mRegistration Load (0.6ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."id" = $1 LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "registrations" WHERE "registrations"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 204 No Content in 5ms (Views: 0.6ms | ActiveRecord: 1.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:38:02 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3", "auth_id"=>"hello"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:38:02 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:38:02 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (114.0ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (328.5ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.1ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (6.6ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.3ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.0ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.3ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:38:43', '2014-02-12 16:38:43', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:38:43', '2014-02-12 16:38:43', 298486374)
  [1m[36m (226.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:38:43 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:38:43 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:38:43 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:38:43 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:38:43 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:38:43 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.4ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:38:47', '2014-02-12 16:38:47', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:38:47', '2014-02-12 16:38:47', 298486374)
  [1m[36m (66.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:38:47 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:38:47 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:38:47", updated_at: "2014-02-12 16:38:47">}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:38:49', '2014-02-12 16:38:49', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:38:49', '2014-02-12 16:38:49', 298486374)
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:38:49 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:38:49 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:38:49 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1", "event_id"=>"3"}
  [1m[36mRegistration Load (0.7ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 3[0m
Completed 200 OK in 69ms (Views: 2.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:38:49 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:38:49 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:38:49 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1"}
  [1m[36mRegistration Load (0.5ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1[0m
Completed 200 OK in 3ms (Views: 1.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:38:49 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:38:49 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1?auth_id=helo" for 127.0.0.1 at 2014-02-12 09:38:49 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"auth_id"=>"helo", "id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:38:49 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3", "auth_id"=>"hello"}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:38:49 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:38:49 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 6ms (Views: 0.7ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (114.6ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (316.5ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.0ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (6.0ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (2.3ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (1.7ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.3ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:39:08', '2014-02-12 16:39:08', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:39:08', '2014-02-12 16:39:08', 298486374)
  [1m[36m (156.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:39:08 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:39:08 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:39:08 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:39:08 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:39:08 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:39:08 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:39:12', '2014-02-12 16:39:12', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:39:12', '2014-02-12 16:39:12', 298486374)
  [1m[36m (21.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:39:12 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:39:12 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:39:12", updated_at: "2014-02-12 16:39:12">}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:39:14', '2014-02-12 16:39:14', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:39:14', '2014-02-12 16:39:14', 298486374)
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:39:14 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:39:14 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:39:14 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1", "event_id"=>"3"}
  [1m[36mRegistration Load (0.5ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 3[0m
Completed 200 OK in 43ms (Views: 1.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:39:14 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:39:14 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:39:14 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1"}
  [1m[36mRegistration Load (0.3ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1[0m
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:39:14 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:39:14 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:39:14 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1"}
  [1m[36mRegistration Load (0.6ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."id" = $1 LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "registrations" WHERE "registrations"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 204 No Content in 4ms (Views: 0.6ms | ActiveRecord: 1.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:39:14 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3", "auth_id"=>"hello"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:39:14 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:39:14 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 4ms (Views: 0.6ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (113.6ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (364.5ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.0ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (6.2ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.3ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:39:26', '2014-02-12 16:39:26', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:39:26', '2014-02-12 16:39:26', 298486374)
  [1m[36m (41.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:39:26 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:39:26 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:39:26 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:39:26 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.9ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:39:26 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:39:26 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:39:30', '2014-02-12 16:39:30', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:39:30', '2014-02-12 16:39:30', 298486374)
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:39:30 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:39:30 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as JSON
  Parameters: {"input"=>#<Registration id: 980190963, user_id: 1, role_id: 1, event_id: 1, created_at: "2014-02-12 16:39:30", updated_at: "2014-02-12 16:39:30">}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:39:32', '2014-02-12 16:39:32', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:39:32', '2014-02-12 16:39:32', 298486374)
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:39:32 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:39:32 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:39:32 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1", "event_id"=>"3"}
  [1m[36mRegistration Load (0.7ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 3[0m
Completed 200 OK in 42ms (Views: 1.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:39:32 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:39:32 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:39:32 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1"}
  [1m[36mRegistration Load (0.3ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1[0m
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:39:32 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:39:32 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:39:32 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1"}
  [1m[36mRegistration Load (0.6ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."id" = $1 LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "registrations" WHERE "registrations"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 204 No Content in 4ms (Views: 0.5ms | ActiveRecord: 1.1ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:39:32 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3", "auth_id"=>"hello"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:39:32 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:39:32 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 2ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (114.4ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (318.7ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.0ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (5.8ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (1.2ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (1.8ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.3ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:43:57', '2014-02-12 16:43:57', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:43:57', '2014-02-12 16:43:57', 298486374)
  [1m[36m (32.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:43:57 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:43:57 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:43:57 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:43:57 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:43:57 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:43:57 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:44:01', '2014-02-12 16:44:01', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:44:01', '2014-02-12 16:44:01', 298486374)
  [1m[36m (68.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:44:01 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:44:01 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:44:01 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1", "event_id"=>"3"}
  [1m[36mRegistration Load (0.5ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 3[0m
Completed 200 OK in 42ms (Views: 2.0ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:44:01 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:44:01 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:44:01 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1"}
  [1m[36mRegistration Load (0.4ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1[0m
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:44:01 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:44:01 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:44:01 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1"}
  [1m[36mRegistration Load (0.6ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."id" = $1 LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "registrations" WHERE "registrations"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 204 No Content in 4ms (Views: 0.4ms | ActiveRecord: 1.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:44:01 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3", "auth_id"=>"hello"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:44:01 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:44:01 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.4ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (113.2ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (336.7ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.0ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (5.9ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (2.0ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (1.7ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.3ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:44:25', '2014-02-12 16:44:25', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:44:25', '2014-02-12 16:44:25', 298486374)
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:44:25 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:44:25 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:44:25 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:44:25 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.9ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:44:25 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:44:25 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.6ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:44:28', '2014-02-12 16:44:28', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:44:28', '2014-02-12 16:44:28', 298486374)
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:44:28 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:44:28 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"1", "event_id"=>"1"}
Filter chain halted as :authenticate_user_info rendered or redirected
Completed 403 Forbidden in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:44:30', '2014-02-12 16:44:30', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:44:30', '2014-02-12 16:44:30', 298486374)
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:44:30 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:44:30 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:44:30 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1", "event_id"=>"3"}
  [1m[36mRegistration Load (0.7ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 3[0m
Completed 200 OK in 46ms (Views: 1.8ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:44:30 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:44:30 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:44:30 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1"}
  [1m[36mRegistration Load (0.4ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1[0m
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:44:30 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:44:30 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:44:30 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1"}
  [1m[36mRegistration Load (0.6ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."id" = $1 LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "registrations" WHERE "registrations"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 204 No Content in 4ms (Views: 0.4ms | ActiveRecord: 1.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:44:30 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3", "auth_id"=>"hello"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:44:30 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:44:30 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 2ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (115.3ms)[0m  [1mDROP DATABASE IF EXISTS "registration_test"[0m
  [1m[35m (323.9ms)[0m  CREATE DATABASE "registration_test" ENCODING = 'utf8'
  [1m[36mSQL (1.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (881.8ms)[0m  CREATE TABLE "registrations" ("id" serial primary key, "user_id" integer, "role_id" integer, "event_id" integer, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (2.2ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (2.3ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20140205031923')
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:44:51', '2014-02-12 16:44:51', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:44:51', '2014-02-12 16:44:51', 298486374)
  [1m[36m (16.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
RegistrationTest: test_it_creates_registration_with_valid_attritbutes
---------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:44:51 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:44:51 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------
RegistrationTest: test_it_exists
--------------------------------
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RegistrationTest: test_it_find_registration_by_event_role
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:44:51 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:44:51 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.8ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RegistrationTest: test_it_returns_for_users_registration
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:44:51 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:44:51 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRegistration Load (0.3ms)[0m  SELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1 ORDER BY "registrations"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:44:55', '2014-02-12 16:44:55', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:44:55', '2014-02-12 16:44:55', 298486374)
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
RegistrationsControllerTest: test_it_sends_created_registrations_as_json
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:44:55 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:44:55 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"1", "event_id"=>"1", "auth_id"=>"hello"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:44:55 UTC +00:00], ["event_id", 1], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:44:55 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 3ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "registrations" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "registrations"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:44:57', '2014-02-12 16:44:57', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "registrations" ("created_at", "updated_at", "id") VALUES ('2014-02-12 16:44:57', '2014-02-12 16:44:57', 298486374)
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "registrations" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/registrations/roles/:id/:event_id_returns_json_for_roles_registrations
---------------------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:44:57 UTC +00:00], ["event_id", 3], ["role_id", 1], ["updated_at", Wed, 12 Feb 2014 16:44:57 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/roles/1/3?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:44:57 -0700
Processing by RegistrationsController#role_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1", "event_id"=>"3"}
  [1m[36mRegistration Load (0.5ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."role_id" = 1 AND "registrations"."event_id" = 3[0m
Completed 200 OK in 42ms (Views: 1.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
----------------------------------------------------------------------------------------------
RegistrationsTest: test_GET_/users/registrations/:id_returns_json_for_the_user's_registrations
----------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:44:57 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:44:57 UTC +00:00], ["user_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/registrations/users/1?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:44:57 -0700
Processing by RegistrationsController#user_registrations as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1"}
  [1m[36mRegistration Load (0.5ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."user_id" = 1[0m
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------------------
RegistrationsTest: test_delete_'/registrations/:id'_destroys_a_existing_registration
------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "registrations" ("created_at", "event_id", "id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["created_at", Wed, 12 Feb 2014 16:44:57 UTC +00:00], ["event_id", 3], ["id", 1], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:44:57 UTC +00:00], ["user_id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/registrations/1?auth_id=hello" for 127.0.0.1 at 2014-02-12 09:44:57 -0700
Processing by RegistrationsController#destroy as HTML
  Parameters: {"auth_id"=>"hello", "id"=>"1"}
  [1m[36mRegistration Load (0.6ms)[0m  [1mSELECT "registrations".* FROM "registrations" WHERE "registrations"."id" = $1 LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "registrations" WHERE "registrations"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 204 No Content in 4ms (Views: 0.5ms | ActiveRecord: 1.1ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------------
RegistrationsTest: test_post_'/registrations'_create_a_new_registration
-----------------------------------------------------------------------
Started POST "/registrations" for 127.0.0.1 at 2014-02-12 09:44:57 -0700
Processing by RegistrationsController#create as HTML
  Parameters: {"user_id"=>"1", "role_id"=>"2", "event_id"=>"3", "auth_id"=>"hello"}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "registrations" ("created_at", "event_id", "role_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Wed, 12 Feb 2014 16:44:57 UTC +00:00], ["event_id", 3], ["role_id", 2], ["updated_at", Wed, 12 Feb 2014 16:44:57 UTC +00:00], ["user_id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 2ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
